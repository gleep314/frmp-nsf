%!TEX root = project_description.tex

%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%
\section{FRP and Stochastic CRNs}
\label{sec:frp_scrns}
%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%

When modeling molecular interactions in small volumes, the deterministic chemical reaction network is often insufficient.
Consider a volume the size of a mammalian cell where the presence or absence of a single virus molecule in the cell may determine whether it lives or dies.
Chemical systems in these environments are inherently probabilistic, and therefore modeling chemical reaction networks with \emph{stochastic mass action kinetics} is appropriate~\cite{jGill77,oCSWB09}.
In a stochastic CRN, molecular counts are modeled discretely, where each state of the CRN is a vector of integral molecular counts.
Stochastic CRNs are equivalent to many well-known models such as vector addition systems~\cite{oGins66,jKaMiWi67,jKarMil69,jNash73,jLero10,cLero12}, Petri nets~\cite{oPetr62,jMura89,oDavAll10,oReis13}, and population protocols~\cite{jAADFP06,jAAER07,jAnAsEi08,jAnAsEi08a,Doty2018}.

Molecular programmers commonly use stochastic CRNs in roughly two ways.
The first approach is to use a \emph{leader molecule} to help direct the computation.
Use of leaders are important in many distributed computing algorithms and have been thoroughly investigated in the context of population protocols~\cite{jAnAsEi08,Doty2018}.
In stochastic CRNs, a leader molecule is used to enable and disable target stages of the computation to guarantee modularity and prevent interference from different parts of the program.
Commonly, only one leader molecule exists in the solution at a time, and when one stage of the computation finishes, it decays into a new leader molecule that enables the next part of the algorithm.
This approach was used by~\cite{jSCWB08} to prove that stochastic CRNs are Turing complete with arbitrarily low probability of error.
Note that such a technique is impossible in a deterministic CRN because a species with strictly positive concentration will remain positive forever.
The second approach is to embrace the stochasticity of the model and harness it to perform computation.
For example, in~\cite{CAPPELLETTI202064}, the authors exploit the stochastic nature of these CRNs to implement arbitrary probability distributions at the nanoscale.
In~\cite{cWinfe19}, the author harnesses this stochasticity to solve a variety of optimization and constraint satisfaction problems.

Since programming with stochastic CRNs is fundamentally different than with deterministic CRNs, the use of functional reactive programming will also be inherently different.
In the latter approach, stochastic CRNs are still intrinsically \emph{signal functions} with a continuous time domain and a discrete co-domain of integral molecular counts, and therefore the FRP style is still appropriate.
However, due to the stochasticity of these CRNs, the input and output signals necessarily must consist of probability distributions over possible state configurations.
This introduces another challenging layer of complexity to programming with stochastic CRNs.

We propose to develop a variant of \reactamole{} with signal function types such as a \hask{SCRN a b} for stochastic CRNs that natively supports types \hask{Bool} and \hask{Int} data types.
However, due to the extra layer of probability theory CRN development, our preliminary work for stochastic CRNs development explores the \emph{leader-directed} approach which is discussed in the following section.
We plan to use the data from this preliminary investigation to inform our development of the more sophisticated FRP approach over probabilistic signals.

% 4. FRP and Stochastic CRNs
%     * Briefly introduce the stochastic CRN model and constrast its
%       unique qualities with the deterministic I/O CRN model
%     * Discuss the multiple approaches that could be explored to
%       provide language support for SCRNs, in particular, the deterministic
%       function computation approach and the more general probability
%       distribution approach
%

\subsection{Leader-Directed Functional Programming}
\label{sub:scrn_haskell_language}

To be written...

%     A. Leader-Directed Functional Programming
%         * Draw connections to current literature on deterministic function
%           computation, leader election, and Turing completeness results
%           that often use leader molecules to direct the computation
%         * Overview Bryce's work on stochastic CRNs, the SCRN type, the
%           Arrow implementations, etc.
%         * Show how the hailstone function can be easily implemented
%           using FRP combinators
%         * Explain how each stage of the computation may be compiled to
%           have an arbitrarily low chance of failure
%         * Contrast this approach with the IOCRN and how its inputs are
%           consumed during the computation
%         * Explain that leader-directed 
%

\subsection{FRP and Probabilistic Signals}

To be written...

%     B. FRP and Probabalistic Signals
%         * Emphasize how both stochastic CRNs are inherently probabalistic
%           and how input signals are in reality, mapping time to a
%           distribution of possible CRN states
%         * Mention how the previously mentioned approach employs the leader
%           method to precisely control the ordering of events. In contrast,
%           biological systems oftem harness stochasticity to be a benefit
%         * We propose to investigate a more general approach to employ FRP
%           in this stochastic setting by regarding the signals of SCRNs to
%           be signals of "probability distributions"
%         * Since CSL is known to be a bisimulation for SCRNs, we will also
%           explore how a CSL type system may be employed to reason about
%           the complex abstractions of manipulating probability
%           distributions through FRP combinators